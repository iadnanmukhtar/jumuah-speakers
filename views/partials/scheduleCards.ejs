<%
  const { formatDateLong, formatTime, initials } = helpers;
%>

<% if (items && items.length > 0) { %>
  <div class="sm:hidden space-y-4">
    <% items.forEach(s => { %>
      <div class="border border-emerald-100 rounded-lg shadow-sm p-4 bg-white">
        <div class="flex items-start justify-between gap-3">
          <div>
            <div class="text-slate-900 font-semibold"><%= formatDateLong(s.date) %></div>
            <div class="text-sm text-slate-500"><%= formatTime(s.time) %></div>
            <div class="mt-1 inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold border
              <%= (s.event_type || 'jumuah') === 'jumuah'
                    ? 'bg-emerald-50 text-emerald-800 border-emerald-100'
                    : 'bg-amber-50 text-amber-800 border-amber-100' %>">
              <%= (s.event_type || 'jumuah') === 'jumuah' ? 'Jumuah' : 'Custom' %>
            </div>
            <div class="flex items-center gap-2 text-xs text-slate-500 mt-2">
              <div class="h-8 w-8 rounded-full overflow-hidden bg-emerald-50 border border-emerald-100 flex items-center justify-center text-emerald-700 font-semibold">
                <% if (s.speaker_avatar) { %>
                  <img src="<%= s.speaker_avatar %>" alt="<%= s.speaker_name || 'Open' %>" class="h-full w-full object-cover" />
                <% } else { %>
                  <span><%= initials(s.speaker_name || 'Open') %></span>
                <% } %>
              </div>
              <span><%= s.speaker_name || 'Open slot' %></span>
            </div>
          </div>
          <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs
            <%= s.status === 'confirmed'
                ? 'bg-emerald-100 text-emerald-800 border border-emerald-300'
                : 'bg-slate-100 text-slate-700 border border-slate-300' %>">
            <%= s.status %>
          </span>
        </div>
        <div class="mt-3 text-sm text-slate-700">
          <div class="font-medium text-slate-900">Topic</div>
          <div class="mt-1"><%= s.topic || 'TBD' %></div>
        </div>
      </div>
    <% }) %>
  </div>
<% } %>
